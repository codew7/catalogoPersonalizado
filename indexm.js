const _0x59b2d3=_0x4c61;function getUrlParameter($){let x=_0x4c61,e=new URLSearchParams(window.location[x(289)]);return e.get($)}function parseCategoryPercentages(){let $=_0x4c61,x=new URLSearchParams(window.location[$(289)]),e=new Map,t=x[$(400)]("c");if(!t)return e;try{let _=atob(t),a=0;for(;a<_[$(402)];){let r=_[$(334)](a);if(++a+r>=_[$(402)])break;let n="";for(let o=0;o<r;o++)n+=_[a],a++;let i=_[$(334)](a);a++,e[$(372)](n,i)}}catch(c){return console[$(398)]($(305),c),e}return e}!function($,x){let e=_0x4c61,t=$();for(;;)try{let _=-parseInt(e(371))/1+-parseInt(e(393))/2*(-parseInt(e(369))/3)+-parseInt(e(319))/4+-parseInt(e(301))/5*(parseInt(e(293))/6)+parseInt(e(337))/7+parseInt(e(291))/8+-parseInt(e(397))/9*(-parseInt(e(350))/10);if(318894===_)break;t.push(t.shift())}catch(a){t.push(t.shift())}}(_0x124b,318894);const customName=getUrlParameter("n")||_0x59b2d3(387),categoryPercentages=parseCategoryPercentages();function getPorcentajeParaCategoria($){return categoryPercentages[_0x59b2d3(400)]($)||0}document[_0x59b2d3(307)](_0x59b2d3(396),function(){let $=_0x59b2d3,x=document[$(353)](".header-content-mobile .mayorista-text"),e=document[$(353)]($(318));x&&(x[$(335)]=customName),e&&(e[$(335)]=customName),"Cat\xe1logo"!==customName&&(document[$(304)]=$(295)+customName);let t=document[$(308)]($(306));t&&(t[$(335)]=customName)});const ITEMS_PER_PAGE=30;let productos=[],currentPage=1,currentLightboxImages=[],currentImageIndex=0,primeraCarga=!0;const loadingOverlay=document[_0x59b2d3(308)](_0x59b2d3(345));function _0x4c61($,x){let e=_0x124b();return(_0x4c61=function($,x){return e[$-=282]})($,x)}function mostrarPagina($,x=productos){let e=_0x59b2d3;currentPage=$,x[e(402)];let t=($-1)*30,_=x[e(339)](t,t+30);cargarGrid(_),actualizarPaginacion($,x),document[e(370)]!==document[e(308)](e(347))&&setTimeout(()=>{let $=e;if(primeraCarga)window[$(392)]({top:0,behavior:"auto"});else{let x=document[$(308)]($(404));if(x){let t=x[$(374)](),_=window[$(386)]||document[$(290)][$(330)];window.scrollTo({top:t[$(294)]+_-20,behavior:"smooth"})}}},0)}function cargarGrid($){let x=_0x59b2d3,e=document[x(308)](x(389));e.innerHTML="",$[x(284)]($=>{let t=x,_=document[t(380)]("div");_[t(366)][t(343)](t(346));let a=document.createElement("input");if(a[t(303)]=t(382),a[t(323)]=$[2],_[t(328)](a),isValidImageUrl($[1])){let r=[];-1!==$[1][t(309)](",")?r=$[1].split(",")[t(298)]($=>$[t(297)]()):r[t(405)]($[1]);let n=document.createElement(t(408));n[t(395)]=r[0],n[t(283)]=t(361),n.onerror=function(){let $=t;this[$(395)]=$(302)},n[t(307)](t(332),()=>{abrirLightbox(r)}),_[t(328)](n)}let o=document[t(380)]("h3");o[t(335)]=$[3],_[t(328)](o);let i=document.createElement(t(375));i.classList[t(343)](t(379)),i[t(335)]="C\xf3digo: "+$[2],_[t(328)](i);let c=document[t(380)](t(375));c[t(366)][t(343)](t(340)),c[t(349)][t(407)]=t(401),c[t(349)].fontWeight=t(357);let l=0;void 0!==$[10]&&null!==$[10]&&""!==$[10]&&(l=parseInt($[10])),isNaN(l)?c.innerHTML=t(363):l<=0?c[t(359)]='<span style="color: #ff9800;">✗ Sin stock</span>':l<=10?c.innerHTML=t(368):c.innerHTML=t(356),_[t(328)](c);let d=$[7],s=getPorcentajeParaCategoria(d);if(s>0){let g=document.createElement("p"),u=(parseFloat(($[6]||"0")[t(327)]().replace(/,/g,""))||0)*(1+s/100);u=10*Math.round((u=Math[t(409)](u))/10),g[t(359)]="<strong>Precio $</strong> "+u[t(326)](t(403)),g[t(349)][t(286)]=t(376),_[t(328)](g)}_[t(328)](c),e[t(328)](_)})}function refreshStockInfo(){let $=_0x59b2d3,x=document[$(312)]($(383));x[$(284)](x=>{let e=$,t=x[e(353)](e(381));if(t){let _=x[e(353)]('input[type="hidden"]');if(_){let a=_[e(323)],r=productos.find($=>$[2]===a),n=0;r&&void 0!==r[10]&&null!==r[10]&&""!==r[10]&&(n=parseInt(r[10])),isNaN(n)?t[e(359)]=e(363):n<=0?t[e(359)]='<span style="color: #ff9800;">✗ Sin stock</span>':n<=10?t[e(359)]=e(368):t[e(359)]=e(356)}}})}function getMaxVisiblePaginationButtons(){let $=_0x59b2d3,x=document.getElementById($(324)),e=window[$(410)];x&&(e=x.offsetWidth||e);let t=Math[$(394)](3,Math[$(311)]((e-220)/48));return Math.min(t,15)}function actualizarPaginacion($,x){let e=_0x59b2d3,t=document[e(308)](e(324));t[e(359)]="";let _=Math[e(390)](x[e(402)]/30);if($>1){let a=document[e(380)](e(365));a[e(335)]=e(367),a[e(349)][e(412)]=e(391),a.addEventListener(e(332),()=>mostrarPagina($-1,x)),t[e(328)](a)}let r=getMaxVisiblePaginationButtons(),n=Math.max(1,$-Math[e(311)](r/2)),o=Math[e(411)](_,n+r-1);o-n<r-1&&(n=Math[e(394)](1,o-r+1));for(let i=n;i<=o;i++){let c=document[e(380)](e(365));c[e(335)]=i,c[e(366)][e(343)](e(299)),i===$&&c[e(366)][e(343)](e(348)),c[e(307)]("click",()=>mostrarPagina(i,x)),t.appendChild(c)}if($<_){let l=document[e(380)](e(365));l.textContent=e(338),l[e(349)][e(412)]=e(391),l[e(307)](e(332),()=>mostrarPagina($+1,x)),t[e(328)](l)}}function isValidImageUrl($){return $&&$[_0x59b2d3(351)](/\.(jpeg|jpg|gif|png)$/i)}function _0x124b(){let $=["info","createElement",".stock-info","hidden",".card","SPREADSHEET_ID","has","pageYOffset","Cat\xe1logo","none","catalogo","ceil","100px","scrollTo","134dEejQq","max","src","DOMContentLoaded","171OdcPPN","error","option","get","5px 0","length","es-AR","categorias","push","base","margin","img","round","innerWidth","min","width","display","loading","forEach","split","marginTop","prev-btn","lightbox","search","documentElement","910240yWAfMV","close","405546DhqWQK","top","Cat\xe1logo - ","resize","trim","map","pagination-button","no disponible","20MXBSSb","no-disponible.png","type","title","Error al decodificar categor\xedas:","footer-catalog-name","addEventListener","getElementById","indexOf","localeCompare","floor","querySelectorAll","#error","lightbox-img","todos","API_KEY","block",".header-content-desktop .mayorista-text","2130180GYlPdr","sort","toLowerCase","contains","value","pagination","?key=","toLocaleString","toString","appendChild","RANGO","scrollTop","https://sheets.googleapis.com/v4/spreadsheets/","click","flex","charCodeAt","textContent","statusText","1323980xZYaKx","Siguiente","slice","stock-info","then","size","add","from","loadingOverlay","card","buscar","active","style","401230fSAZIw","match","includes","querySelector","values","next-btn",'<span style="color: #4CAF50;">✓ Disponible</span>',"bold","No se encontraron datos en la hoja.","innerHTML","message","lazy","filter",'<span style="color: #ff9800;">✗ Sin stock</span>',"currentTarget","button","classList","Anterior",'<span style="color: #ffeb3b;">⚠ Pocas unidades</span>',"16593HUxWMn","activeElement","314031drVLCR","set","undefined","getBoundingClientRect","div","2px","stopPropagation","target"];return(_0x124b=function(){return $})()}function abrirLightbox($){let x=_0x59b2d3;currentLightboxImages=$,currentImageIndex=0,document[x(308)](x(314))[x(395)]=currentLightboxImages[currentImageIndex],document[x(308)](x(288))[x(349)][x(282)]=x(333),actualizarBotonesLightbox()}function actualizarBotonesLightbox(){let $=_0x59b2d3,x=document[$(308)]($(287)),e=document.getElementById($(355));currentLightboxImages[$(402)]>1?(x[$(349)][$(282)]=$(317),e[$(349)].display="block"):(x[$(349)][$(282)]=$(388),e.style.display=$(388))}function closeLightbox($){let x=_0x59b2d3;($[x(378)]===$[x(364)]||$[x(378)][x(366)][x(322)](x(292)))&&(document[x(308)]("lightbox").style[x(282)]=x(388))}fetch(_0x59b2d3(331)+G_S_CONFIG[_0x59b2d3(384)]+"/values/"+G_S_CONFIG[_0x59b2d3(329)]+_0x59b2d3(325)+G_S_CONFIG[_0x59b2d3(316)])[_0x59b2d3(341)]($=>{let x=_0x59b2d3;if(!$.ok)throw Error("Error al acceder a la API: "+$[x(336)]);return $.json()})[_0x59b2d3(341)]($=>{let x=_0x59b2d3;loadingOverlay&&(loadingOverlay[x(349)].display=x(388));let e=$[x(354)];if(!e||0===e[x(402)])throw Error(x(358));productos=e[x(362)]($=>{let e=x;if($[4][e(321)]()===e(300))return!1;let t=0;if(void 0!==$[10]&&null!==$[10]&&""!==$[10]&&(t=parseInt($[10])),isNaN(t)||t<=0)return!1;if(categoryPercentages[e(342)]>0){let _=$[7];return categoryPercentages[e(385)](_)}return!0})[x(320)](($,x)=>{function e($){let x=_0x4c61;if(!$||""===$||null==$)return new Date(1900,0,1);if($[x(352)]("/")){let e=$[x(285)]("/");if(3===e[x(402)]){let t=parseInt(e[0]),_=parseInt(e[1])-1,a=parseInt(e[2]);return new Date(a,_,t)}}return new Date(1900,0,1)}let t=e($[12]),_=e(x[12]);return _-t}),window[x(392)](0,0),mostrarPagina(1),setTimeout(()=>{refreshStockInfo(),setTimeout(()=>{primeraCarga=!1},100)},100);let t=new Set(productos[x(298)]($=>$[0])),_=document[x(308)](x(404)),a=Array[x(344)](t)[x(362)]($=>$&&""!==$[x(297)]())[x(320)](($,e)=>$[x(310)](e,"es",{sensitivity:x(406)}));function r(){let $=x,e=document[$(308)]($(404))[$(323)],t=document[$(308)]("buscar")[$(323)].toLowerCase(),_=productos;"todos"!==e&&(_=_[$(362)]($=>$[0]===e)),""!==t[$(297)]()&&(_=_[$(362)](x=>x[3][$(321)]()[$(352)](t)||x[2][$(321)]().includes(t))),mostrarPagina(1,_)}a[x(284)]($=>{let e=x,t=document[e(380)](e(399));t[e(323)]=$,t[e(335)]=$,_[e(328)](t)}),_.addEventListener("change",()=>{r()}),document[x(308)](x(347))[x(307)]("input",$=>{r()}),document[x(308)]("todos")[x(307)](x(332),()=>{let $=x;document[$(308)]($(404))[$(323)]=$(315),document.getElementById($(347))[$(323)]="",mostrarPagina(1)})}).catch($=>{let x=_0x59b2d3;loadingOverlay&&(loadingOverlay[x(349)].display=x(388)),console.error("Error al cargar los datos:",$),document[x(353)](x(313)).textContent=$[x(360)]}),window[_0x59b2d3(307)](_0x59b2d3(296),()=>{let $=_0x59b2d3;typeof currentPage!==$(373)&&typeof productos!==$(373)&&actualizarPaginacion(currentPage,productos)}),document[_0x59b2d3(308)](_0x59b2d3(355))[_0x59b2d3(307)](_0x59b2d3(332),$=>{let x=_0x59b2d3;$[x(377)](),currentLightboxImages[x(402)]>0&&(currentImageIndex=(currentImageIndex+1)%currentLightboxImages[x(402)],document.getElementById(x(314))[x(395)]=currentLightboxImages[currentImageIndex])}),document[_0x59b2d3(308)]("prev-btn")[_0x59b2d3(307)]("click",$=>{let x=_0x59b2d3;$[x(377)](),currentLightboxImages[x(402)]>0&&(currentImageIndex=(currentLightboxImages[x(402)]+currentImageIndex-1)%currentLightboxImages[x(402)],document.getElementById(x(314))[x(395)]=currentLightboxImages[currentImageIndex])}),document[_0x59b2d3(308)](_0x59b2d3(314))[_0x59b2d3(307)](_0x59b2d3(398),function(){let $=_0x59b2d3;currentLightboxImages[$(402)]>0&&0!==currentImageIndex&&(currentImageIndex=0,this[$(395)]=currentLightboxImages[0])});
